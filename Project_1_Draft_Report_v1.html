<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jan Blackburn">

<title>Math 261A Project 1 Draft Report: NBA Player Wingspan vs Total Rebounds</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Project_1_Draft_Report_v1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/popper.min.js"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Project_1_Draft_Report_v1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Project_1_Draft_Report_v1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Project_1_Draft_Report_v1_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Project_1_Draft_Report_v1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Project_1_Draft_Report_v1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Project_1_Draft_Report_v1_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Math 261A Project 1 Draft Report: NBA Player Wingspan vs Total Rebounds</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jan Blackburn </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><strong>Title:</strong> Linear Regression of Total Rebounds vs.&nbsp;Player Wingspan<br>
<strong>Author:</strong> Jan Blackburn, Math 261A<br>
<strong>Date:</strong> September 24, 2025<br>
</p>
<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
<p>Analysis of NBA statistics can be useful in helping evaluate the potential performance of NBA players and their teams. This paper examines the relationship between a players wingspan (measured distance of their arms from fingertip to fingertip) as a predictor of total rebounds. Wingspan has been found to be a key physical attribute of NBA players, contributing to their defensive capabilities as measured by the number of rebounds achieved. This paper evaluated this premise by evaluating data from the [enter data set name] and regressing the number of rebounds obtained in the last 100 ball possessions using a linear regression model. Model results suggest that a linear relationship does appear to exist but that not all critical regression assumptions are strictly met. Based on these findings, further analyses are recommended to enhance the model fit to improve predictive accuracy.</p>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Professional Sports in the United States is a big business. This motivates a great deal of analysis by those involved in professional sports including fans, sports analysts and talent scouts to use statistical analysis to improve their understanding of key attributes that contribute to performance. This is especially true in professional basketball where physical attributes such as height can be a key indicator of their ability to perform competitively at a professional level.</p>
<p>In addition to height, <strong>wingspan</strong> defined as the distance from fingertip to finger on a player with their arms outstretched is frequently used as a key physical attribute that can provide players with advantages in defensive performance as measured by the number of steals, blocked shots and rebounds. Since wingspans are relative to players height, an alternative metric <strong>wingspan advantage</strong> is used and this is measured as a player’s wingspan - height. For example, a player with wingspan of 80 inches and height of 72 inches will have wingspan advantage of 8 inches. A larger wingspan advantage is considered to be more beneficial to defensive performance.</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>The data for this study was sourced from <a href="https://data.scorenetwork.org/basketball/nba_wingspans_and_performance.html">NBA Data</a><u>.</u> This dataset contains player level statistics based on 100 ball possessions (i.e., the last last 100 times the player handled the ball) collected from the 2024-25 National Basketball Association (NBA) season. This data set was compiled from a number of online data sources by the author.</p>
<p>In all, this data set contains 419 rows, representing statistics for each player and 26 columns that include descriptive and numerical data about the players and several key performance statistics. A summary of the variables is included in the Appendix.</p>
<p>Since <strong>wingspan advantage</strong> is considered a key physical characteristic that can contribute to enhanced performance, we are using this variable as our predictor variable. There are many metrics used to measure defensive performance including, rebounds, steals and blocks. Since steals and blocks occur less often in games relative to rebounds as shown in the exhibit below, therefore, we selected to use rebounds as the response variable in this paper to ensure sufficient variability in the data as shown in the exhibit below.</p>
<p><strong>Exhibit 1:</strong> Key Measures and Statistics</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Metric</th>
<th style="text-align: center;">Min</th>
<th style="text-align: center;">Q1</th>
<th style="text-align: center;">Median</th>
<th style="text-align: center;">Mean</th>
<th style="text-align: center;">Q3</th>
<th style="text-align: center;">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Wingspan Advantage</td>
<td style="text-align: center;">-1.5</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4.5</td>
<td style="text-align: center;">4.46</td>
<td style="text-align: center;">6.13</td>
<td style="text-align: center;">10.75</td>
</tr>
<tr class="even">
<td>Rebounds</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">9.1</td>
<td style="text-align: center;">11.3</td>
<td style="text-align: center;">23</td>
</tr>
<tr class="odd">
<td>Blocks</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0.43</td>
<td style="text-align: center;">0.8</td>
<td style="text-align: center;">1.02</td>
<td style="text-align: center;">1.38</td>
<td style="text-align: center;">5.6</td>
</tr>
<tr class="even">
<td>Steals</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1.2</td>
<td style="text-align: center;">1.6</td>
<td style="text-align: center;">1.7</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">5.1</td>
</tr>
</tbody>
</table>
<p>An evaluation of the data was performed, and we removed a row that contained NA values so the resulting data set contains 418 rows in total.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Since we are applying a simple linear regression, we analyzed the data to validate key assumptions needed for a valid regression model:</p>
<ul>
<li><p>Existence of a linear relationship between trb and wing_span advantage</p></li>
<li><p>Residuals have a 0 mean, are independent and have a constant variance</p></li>
</ul>
<p>To validate assumptions, we initially generated a scatter plot of trb vs.&nbsp;wingspan_advantage as shown below after importing the data in R:</p>
<p><strong>Exhibit 2:</strong> Scatter Plot of Wingspan Advantage vs.&nbsp;Total Rebounds</p>
<p><img src="images/clipboard-2889153114.png" class="img-fluid" width="587"></p>
<p>As can be from Exhibit 2 above, there does not appear to be a clear linear relationship between the response and predictor variables. The fitted linear line suggests that there is slightly positive correlation between the two variables. After evaluation of this exhibit, we simplified the predictor variable by replacing using wingspan advantage with wingspan variable since wingspan advantage may include other confounding influences represented in wingspan and height.</p>
<p>The scatter plot of between wingspan and total rebounds shows a clear linear relationship has illustrated in Exhibit 3 below.</p>
<p><strong>Exhibit 3:</strong> Scatter Plot of Wingspan vs.&nbsp;Total Rebounds</p>
<p><img src="images/clipboard-2320005347.png" class="img-fluid" width="606"></p>
<p>Based on the demonstration of a linear relationship between the predictor and response variables and we proceeded with fitting a simple linear regression model to the data using the lm() function in R.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>The following linear regression model was fit to the data:</p>
<p><span class="math inline">\((trb)_i = \beta_0 + \beta_1 \cdot \text{(wingspan_inches)}_i + \varepsilon_i\)</span></p>
<p>The results</p>
<p><strong>Exhibit 4:</strong> Linear Regression Results</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Parameter</th>
<th style="text-align: center;">Estimate</th>
<th style="text-align: center;">Std. Error</th>
<th style="text-align: center;">t-statistic</th>
<th style="text-align: center;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Intercept</td>
<td style="text-align: center;">-52.18849</td>
<td style="text-align: center;">3.14692</td>
<td style="text-align: center;">-16.58</td>
<td style="text-align: center;">&lt;2e-16</td>
</tr>
<tr class="even">
<td>wingspan_inches</td>
<td style="text-align: center;">0.74191</td>
<td style="text-align: center;">0.03807</td>
<td style="text-align: center;">19.49</td>
<td style="text-align: center;">&lt;2e-16</td>
</tr>
</tbody>
</table>
<p><strong>Residuals</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Min</th>
<th style="text-align: center;">Q1</th>
<th style="text-align: center;">Median</th>
<th style="text-align: center;">Q3</th>
<th style="text-align: center;">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-6.70</td>
<td style="text-align: center;">-1.97</td>
<td style="text-align: center;">-0.33</td>
<td style="text-align: center;">1.51</td>
<td style="text-align: center;">10.32</td>
</tr>
</tbody>
</table>
<p><strong>The F-statistic is 379.9 (1, 416df) with p-value &lt;2e-16 and</strong> <span class="math inline">\(R^2\)</span> <strong>= 0.4773.</strong></p>
<p>These regression results suggest that there is relationship between wingspan and total rebounds since all p-values are negligible and R^2 is near 0.5. The coefficient estimate suggests that a one inch increase in wingspan contributes to approximately 0.74 additional rebounds over 100 ball possessions and is consistent with the expected results. The median residuals are near 0 suggesting that a close approximation to 0.</p>
<p>We next looked to validate the assumptions regarding distribution of residuals by creating a scatter plot of the residuals to validate independence and constant variance assumptions. The resulting residual plot is shown below in Exhibit 5. Visual inspection suggests that the residuals increase slightly as wingspan increases, suggesting variance is not constant.</p>
<p><strong>Exhibit 5:</strong> Residual Plots</p>
<p><img src="images/clipboard-1229148351.png" class="img-fluid"></p>
<p>We also tested to see if the residuals were normally distributed by generating a Q-Q plot which is shown in Exhibit 6 below. As can be seen, the data appears to be approximately normal between the -2 to 2 of the theoretical quantiles but diverges from the line at the tails, suggesting slightly heavier tails for the extremes. Overall, however, the residuals appear to be approximately normally distributed.</p>
<p><strong>Exhibit 6:</strong> Q-Q Plot</p>
<p><img src="images/clipboard-1537885989.png" class="img-fluid"></p>
<p>Based on the modeling results have generated the following key takeaways:</p>
<ul>
<li><p>Our initial approach to use wingspan_advantage as the predictor variable did not yield an apparent linear relationship. We believe this due the potential confounding impacts of having wingspan and height in the calculation</p></li>
<li><p>There does appear to be a linear relationship between wingspan and total rebounds as demonstrated through visual inspection and the results of the linear regression</p></li>
<li><p>The resulting linear model suggests that each additional inch of wingspan increases the total number of rebounds by nearly 0.5 and nearly half of the total variance was explained by the model</p></li>
<li><p>Residuals appear to be centered near zero but variance is not constant suggesting that specific inferences or predictions with this model may not be entirely accurate</p></li>
</ul>
<p>This data set includes additional variables that could be used to further explore and refine our understanding of wingspans impact on rebounding. In pursuit of this goal, we recommend employing a multiple regression model that could include the following variables:</p>
<ul>
<li><p>Include categorical variables to account for differences in a player’s position since this could impact rebound level due to differences in defensive roles</p></li>
<li><p>Incorporate player’s height as this could help further refine the relationship between wingspan and and rebounds since this could be a confounding variable</p></li>
<li><p>Apply the model to offensive vs.&nbsp;defensive rebounds to determine if there is meaningful difference</p></li>
</ul>
<p>Further analysis of this relationship could help yield useful insights that could be used by those interested improved predictions for player performance.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>